{"ast":null,"code":"import createEventHandle from \"../createEventHandle\";\nimport useLayoutEffect from \"../useLayoutEffect\";\nimport useStable from \"../useStable\";\nexport default function useEvent(event, options) {\n  var targetListeners = useStable(function () {\n    return new Map();\n  });\n  var addListener = useStable(function () {\n    var addEventListener = createEventHandle(event, options);\n    return function (target, callback) {\n      var removeTargetListener = targetListeners.get(target);\n\n      if (removeTargetListener != null) {\n        removeTargetListener();\n      }\n\n      if (callback == null) {\n        targetListeners.delete(target);\n      }\n\n      var removeEventListener = addEventListener(target, callback);\n      targetListeners.set(target, removeEventListener);\n      return removeEventListener;\n    };\n  });\n  useLayoutEffect(function () {\n    return function () {\n      targetListeners.forEach(function (removeListener) {\n        removeListener();\n      });\n      targetListeners.clear();\n    };\n  }, []);\n  return addListener;\n}","map":{"version":3,"sources":["C:/Users/perum/Documents/Harmony/frontend/HarmonyMobileApp/node_modules/react-native-web/dist/modules/useEvent/index.js"],"names":["createEventHandle","useLayoutEffect","useStable","useEvent","event","options","targetListeners","Map","addListener","addEventListener","target","callback","removeTargetListener","get","delete","removeEventListener","set","forEach","removeListener","clear"],"mappings":"AAQA,OAAOA,iBAAP;AACA,OAAOC,eAAP;AACA,OAAOC,SAAP;AAWA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,OAAzB,EAAkC;AAC/C,MAAIC,eAAe,GAAGJ,SAAS,CAAC,YAAY;AAC1C,WAAO,IAAIK,GAAJ,EAAP;AACD,GAF8B,CAA/B;AAGA,MAAIC,WAAW,GAAGN,SAAS,CAAC,YAAY;AACtC,QAAIO,gBAAgB,GAAGT,iBAAiB,CAACI,KAAD,EAAQC,OAAR,CAAxC;AACA,WAAO,UAAUK,MAAV,EAAkBC,QAAlB,EAA4B;AACjC,UAAIC,oBAAoB,GAAGN,eAAe,CAACO,GAAhB,CAAoBH,MAApB,CAA3B;;AAEA,UAAIE,oBAAoB,IAAI,IAA5B,EAAkC;AAChCA,QAAAA,oBAAoB;AACrB;;AAED,UAAID,QAAQ,IAAI,IAAhB,EAAsB;AACpBL,QAAAA,eAAe,CAACQ,MAAhB,CAAuBJ,MAAvB;AACD;;AAED,UAAIK,mBAAmB,GAAGN,gBAAgB,CAACC,MAAD,EAASC,QAAT,CAA1C;AACAL,MAAAA,eAAe,CAACU,GAAhB,CAAoBN,MAApB,EAA4BK,mBAA5B;AACA,aAAOA,mBAAP;AACD,KAdD;AAeD,GAjB0B,CAA3B;AAkBAd,EAAAA,eAAe,CAAC,YAAY;AAC1B,WAAO,YAAY;AACjBK,MAAAA,eAAe,CAACW,OAAhB,CAAwB,UAAUC,cAAV,EAA0B;AAChDA,QAAAA,cAAc;AACf,OAFD;AAGAZ,MAAAA,eAAe,CAACa,KAAhB;AACD,KALD;AAMD,GAPc,EAOZ,EAPY,CAAf;AAQA,SAAOX,WAAP;AACD","sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\r\nimport createEventHandle from '../createEventHandle';\r\nimport useLayoutEffect from '../useLayoutEffect';\r\nimport useStable from '../useStable';\r\n\r\n/**\r\n * This can be used with any event type include custom events.\r\n *\r\n * const click = useEvent('click', options);\r\n * useEffect(() => {\r\n *   click.setListener(target, onClick);\r\n *   return () => click.clear();\r\n * }).\r\n */\r\nexport default function useEvent(event, options) {\r\n  var targetListeners = useStable(function () {\r\n    return new Map();\r\n  });\r\n  var addListener = useStable(function () {\r\n    var addEventListener = createEventHandle(event, options);\r\n    return function (target, callback) {\r\n      var removeTargetListener = targetListeners.get(target);\r\n\r\n      if (removeTargetListener != null) {\r\n        removeTargetListener();\r\n      }\r\n\r\n      if (callback == null) {\r\n        targetListeners.delete(target);\r\n      }\r\n\r\n      var removeEventListener = addEventListener(target, callback);\r\n      targetListeners.set(target, removeEventListener);\r\n      return removeEventListener;\r\n    };\r\n  });\r\n  useLayoutEffect(function () {\r\n    return function () {\r\n      targetListeners.forEach(function (removeListener) {\r\n        removeListener();\r\n      });\r\n      targetListeners.clear();\r\n    };\r\n  }, []);\r\n  return addListener;\r\n}"]},"metadata":{},"sourceType":"module"}